<!DOCTYPE html>
<html>


<head>
  <meta charset="UTF-8">
  <title>Islamic star pattern generator</title>
  <script src="js/require.js" data-main="js/main.js"></script>

  <link rel="stylesheet" href="js/lib/jquery-ui.css"/>

  <style>
    #controls{
      width: 50%;
      position: absolute;
      top: 0; left: 0;
    }

    #display{
      position: absolute;
      top: 1%; left: 51%;
      width: 50%;
      text-align: center;
      padding-top: 1em;
    }

    #savetab,#loadtab {
      float: right;
    }

    .upload-link input {
      display:none;
    }

    .upload-link {
      text-decoration: underline;
      cursor: pointer;
    }

    input[type=number] {
      width: 4em;
    }

    #s1value, #s2value {
      display: inline-block;
      width: 3em;
    }
  </style>

  <style id="svg-style"></style>

  </head>

<body>

<!-- *********************************************************************** -->
<!-- ** Control panel ****************************************************** -->
<!-- *********************************************************************** -->

<div id="controls">
  <ul> <li><a href="#delta-controls">Delta</a></li>
       <li><a href="#theta-controls">Theta</a></li>
       <li><a href="#shape-controls">Shape</a></li>
       <li><a href="#style-controls">Style</a></li>
       <li id="savetab"><a download="params.json" id="save">Save</a></li>
       <li id="loadtab" class="ui-state-default ui-corner-top" role="tab">
         <label class="upload-link ui-tabs-anchor">
         <input type="file" id="load"></input>
         Load</label>
         </li></ul>

<!-- *********************************************************************** -->

<div id="shape-controls">
  Rows: <input type="number" id="rows" value="2" step="1"></input>
  Cols: <input type="number" id="cols" value="4" step="1"></input>

  Shape: <select id="shape">
    <option value="hex">Hexagons</option>
    <option value="oct">Octagons</option>
    <option value="dodec">Dodecahedra</option>
    <option value="ddodec">Doubled Dodecahedra</option>
  </select>
</div>
  
<!-- *********************************************************************** -->

<div id="delta-controls">
<pre>
/**
 * returns the distance between the endpoints.
 * tile    is the tile currently being drawn.
 *         use tile[0] and tile[1] to get the row and column
 * x and y are the (absolute) position of the point,
 *         scaled to the range [0,1]
 * typical outputs are in the range [0,1)
 */
function delta(tile,x,y) {
</pre>&nbsp;&nbsp;<textarea id="delta" rows="10" cols="50" wrap="off">
var s1 = d3.select('#s1').node().value;
var s2 = d3.select('#s2').node().value;
return 2*s1-1;
</textarea>
<pre>
}
</pre>
</div>

<!-- *********************************************************************** -->

<div id="theta-controls">
<pre>
/**
 * returns the angle between the edges.
 * tile    is the tile currently being drawn.
 *         use tile[0] and tile[1] to get the row and column
 * x and y are the (absolute) position of the point,
 *         scaled to the range [0,1]
 * typical outputs are in the range [0,Math.PI)
 */
function theta(tile,x,y) {
</pre>
&nbsp;&nbsp;<textarea id="theta"rows="10" cols="50" wrap="off">
var s1 = d3.select('#s1').node().value;
var s2 = d3.select('#s2').node().value;
return s2*Math.PI;
</textarea>
<pre>
}
</pre>
</div>

<!-- *********************************************************************** -->

<div id="style-controls">
<textarea id="style"rows="20" cols="50" wrap="off">
.structure {
  fill: none;
  stroke: blue;
  stroke-width: 0.02;
}

.pattern {
  fill: none;
  stroke: black;
  stroke-width: 0.02;
}
</textarea>
</div>

</div> <!-- controls -->

<!-- *********************************************************************** -->
<!-- ** Display ************************************************************ -->
<!-- *********************************************************************** -->


<div id="display">

  <a download="pattern.svg" id="download"><svg id="drawing" width="500" height="300"></svg></a>

  <br />
  s1: <input type="range" id="s1" min="0" max="1" step=".01"/> <span id="s1value"></span>
  s2: <input type="range" id="s2" min="0" max="1" step=".01"/> <span id="s2value"></span>

</div>

</body>

</html>

